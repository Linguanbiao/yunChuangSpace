{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport showMessage from \"@/utils/showMessage.js\";\nexport default {\n  data() {\n    return {\n      isSubmitting: false,\n      formData: {\n        nickname: \"\",\n        content: \"\"\n      },\n      errorData: {\n        nickname: \"\",\n        content: \"\"\n      }\n    };\n  },\n\n  methods: {\n    handleSubmit() {\n      this.errorData.nickname = this.formData.nickname ? \"\" : \"请填写昵称！\";\n      this.errorData.content = this.formData.content ? \"\" : \"请填写评论内容！\";\n\n      if (this.formData.nickname && this.formData.content) {\n        this.isSubmitting = true; // 抛出一个事件，让父组件来处理，处理完成后要执行一个回调函数\n\n        this.$emit(\"submit\", this.formData, resp => {\n          this.isSubmitting = false;\n          this.formData.nickname = \"\";\n          this.formData.content = \"\";\n          showMessage({\n            content: resp,\n            type: \"success\",\n            duration: 1000,\n            container: this.$refs.formContainer\n          });\n        });\n      }\n\n      return;\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;EACAA;IACA;MACAC,mBADA;MAEAC;QACAC,YADA;QAEAC;MAFA,CAFA;MAMAC;QACAF,YADA;QAEAC;MAFA;IANA;EAWA,CAbA;;EAcAE;IACAC;MACA;MACA;;MACA;QACA,yBADA,CAEA;;QACA;UACA;UACA;UACA;UACAC;YACAJ,aADA;YAEAK,eAFA;YAGAC,cAHA;YAIAC;UAJA;QAMA,CAVA;MAWA;;MACA;IACA;;EApBA;AAdA","names":["data","isSubmitting","formData","nickname","content","errorData","methods","handleSubmit","showMessage","type","duration","container"],"sourceRoot":"src/components/MessageArea","sources":["DataForm.vue"],"sourcesContent":["<template>\n  <form\n    @submit.prevent=\"handleSubmit\"\n    class=\"data-form-container\"\n    ref=\"formContainer\"\n  >\n    <div class=\"form-item\">\n      <div class=\"input-area\">\n        <input\n          type=\"text\"\n          placeholder=\"用户昵称\"\n          v-model=\"formData.nickname\"\n          maxlength=\"10\"\n        />\n        <span class=\"tip\">{{ formData.nickname.length }}/10</span>\n      </div>\n      <div class=\"error\">{{ errorData.nickname }}</div>\n    </div>\n    <div class=\"form-item\">\n      <div class=\"text-area\">\n        <textarea\n          placeholder=\"请输入内容\"\n          v-model=\"formData.content\"\n          maxlength=\"300\"\n        ></textarea>\n        <span class=\"tip\">{{ formData.content.length }}/300</span>\n      </div>\n      <div class=\"error\">{{ errorData.content }}</div>\n    </div>\n    <div class=\"form-item\">\n      <div class=\"button-area\">\n        <button :disabled=\"isSubmitting\">\n          {{ isSubmitting ? \"提交中\" : \"提交\" }}\n        </button>\n      </div>\n    </div>\n  </form>\n</template>\n\n<script>\nimport showMessage from \"@/utils/showMessage.js\";\nexport default {\n  data() {\n    return {\n      isSubmitting: false,\n      formData: {\n        nickname: \"\",\n        content: \"\",\n      },\n      errorData: {\n        nickname: \"\",\n        content: \"\",\n      },\n    };\n  },\n  methods: {\n    handleSubmit() {\n      this.errorData.nickname = this.formData.nickname ? \"\" : \"请填写昵称！\";\n      this.errorData.content = this.formData.content ? \"\" : \"请填写评论内容！\";\n      if (this.formData.nickname && this.formData.content) {\n        this.isSubmitting = true;\n        // 抛出一个事件，让父组件来处理，处理完成后要执行一个回调函数\n        this.$emit(\"submit\", this.formData, (resp) => {\n          this.isSubmitting = false;\n          this.formData.nickname = \"\";\n          this.formData.content = \"\";\n          showMessage({\n            content: resp,\n            type: \"success\",\n            duration: 1000,\n            container: this.$refs.formContainer,\n          });\n        });\n      }\n      return;\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import \"~@/style/var.less\";\n.data-form-container {\n  margin-bottom: 20px;\n  overflow: hidden;\n}\n.form-item {\n  margin-bottom: 8px;\n}\n.input-area {\n  width: 50%;\n  position: relative;\n}\n.text-area {\n  position: relative;\n}\n.tip {\n  position: absolute;\n  right: 5px;\n  bottom: 5px;\n  color: #b4b8bc;\n  font-size: 12px;\n}\ninput,\ntextarea {\n  display: block;\n  width: 100%;\n  box-sizing: border-box;\n  border: 1px dashed @gray;\n  outline: none;\n  color: @words;\n  font-size: 14px;\n  border-radius: 4px;\n  &:foucs {\n    border-color: @primary;\n  }\n}\ninput {\n  padding: 0 15px;\n  height: 40px;\n}\ntextarea {\n  resize: none;\n  padding: 8px 15px;\n  height: 120px;\n}\n.error {\n  margin-top: 6px;\n  color: @danger;\n  font-size: 14px;\n  height: 20px;\n  line-height: 20px;\n}\nbutton {\n  position: relative;\n  cursor: pointer;\n  border: none;\n  outline: none;\n  width: 100px;\n  height: 34px;\n  color: #fff;\n  border-radius: 4px;\n  background: @primary;\n  &:hover {\n    background: darken(@primary, 10%);\n  }\n  &:disabled {\n    background: lighten(@primary, 20%);\n    cursor: not-allowed;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}